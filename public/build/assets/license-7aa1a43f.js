import{r as c,f as z,h as B,a as j,c as i,b as e,F as M,x as D,k as u,d as l,e as p,o,t as h,n as f,j as E}from"./app-0dbf4f4e.js";import{_ as y}from"./ButtonColor-74c3d4a0.js";import{_ as w,a as k}from"./ButtonPrimary-847c2515.js";const G={class:"container p-5"},q={key:0,class:"relative overflow-x-auto"},A={class:"w-full text-sm text-left text-gray-500"},F=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," # "),e("th",{scope:"col",class:"px-6 py-3"}," License Key "),e("th",{scope:"col",class:"px-6 py-3"}," License Type "),e("th",{scope:"col",class:"px-6 py-3"}," Hạn Dùng "),e("th",{scope:"col",class:"px-6 py-3"}," Function ")])],-1),H={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},N={class:"px-6 py-4"},K={class:"px-6 py-4"},Q={class:"px-6 py-4"},T={class:"px-6 py-4"},U={key:1,class:"fixed z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex justify-center items-center"},I={class:"relative w-full max-w-md max-h-full"},J={class:"relative bg-white rounded-lg shadow"},O=e("span",{class:"sr-only"},"Close modal",-1),P={class:"px-6 py-6 lg:px-8"},R=e("h3",{class:"mb-4 text-xl font-medium text-gray-900 capitalize"},"Sửa license",-1),W={class:"space-y-6"},X={key:2,class:"fixed z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex justify-center items-center"},Y={class:"relative w-full max-w-md max-h-full"},Z={class:"relative bg-white rounded-lg shadow"},ee=e("span",{class:"sr-only"},"Close modal",-1),te={class:"px-6 py-6 lg:px-8"},se=e("h3",{class:"mb-4 text-xl font-medium text-gray-900 capitalize"},"Gia hạn",-1),ae={class:"space-y-6"},ce={__name:"license",setup(le){const _=c(null),r=c(!1),d=c(!1),n=c(null),m=c(0),v=z();function C(a){n.value=a,r.value=!0}function V(a){d.value=!0,n.value=a}async function $(a){try{const s=await p.post("api/download",{license:a});window.location.href=s.data}catch{}}async function L(){const a={license:n.value,quan:m.value};await p.post("api/license/extend",{data:a},{headers:{Authorization:`Bearer ${v.state.token}`}}).then(s=>{d.value=!1}).catch(s=>{}),await x()}async function S(){const a=n.value;await p.post("api/license/change",{license:a},{headers:{Authorization:`Bearer ${v.state.token}`}}).then(s=>{r.value=!1}).catch(s=>{}),await x()}async function x(){await p.get("api/license",{headers:{Authorization:`Bearer ${v.state.token}`}}).then(a=>{_.value=a.data}).catch(a=>{})}return B(x),(a,s)=>{const g=j("font-awesome-icon");return o(),i("div",G,[_.value!==null?(o(),i("div",q,[e("table",A,[F,e("tbody",null,[(o(!0),i(M,null,D(_.value,t=>(o(),i("tr",{key:t.id,class:"bg-white border-b"},[e("th",H,h(t.id),1),e("td",N,h(t.license_key),1),e("td",K,h(t.license_type),1),e("td",Q,h(t.expiry_date==null?"Vĩnh Viễn":t.expiry_date),1),e("td",T,[l(y,{class:f("bg-green-400 hover:bg-green-600 focus:ring-4 focus:ring-green-300"),onClick:b=>C(t),label:"Sửa"},null,8,["onClick"]),t.expiry_date!==null?(o(),E(y,{key:0,class:f("bg-teal-400 hover:bg-teal-600 focus:ring-4 focus:ring-teal-300"),onClick:b=>V(t),label:"Gia Hạn"},null,8,["onClick"])):u("",!0),l(y,{class:f("bg-violet-400 hover:bg-violet-600 focus:ring-4 focus:ring-violet-300"),onClick:b=>$(t),label:"Tải Về"},null,8,["onClick"])])]))),128))])])])):u("",!0),r.value?(o(),i("div",U,[e("div",I,[e("div",J,[e("button",{type:"button",onClick:s[0]||(s[0]=t=>r.value=!1),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center"},[l(g,{icon:["fas","xmark"]}),O]),e("div",P,[R,e("div",W,[e("div",null,[l(w,{modelValue:n.value.license_key,"onUpdate:modelValue":s[1]||(s[1]=t=>n.value.license_key=t),label:"License",type:"text",name:"licenseKey",placeholder:"Điền License Ở Đây",required:""},null,8,["modelValue"])]),l(k,{label:"Sửa",onClick:S})])])])])])):u("",!0),d.value?(o(),i("div",X,[e("div",Y,[e("div",Z,[e("button",{type:"button",onClick:s[2]||(s[2]=t=>d.value=!1),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center"},[l(g,{icon:["fas","xmark"]}),ee]),e("div",te,[se,e("div",ae,[e("div",null,[l(w,{modelValue:m.value,"onUpdate:modelValue":s[3]||(s[3]=t=>m.value=t),label:"Số Lượng",type:"number",name:"licenseQuan",placeholder:"vd mua 1h mà gia hạn tiếp 1h thì ghi 1",required:""},null,8,["modelValue"])]),l(k,{label:"Gia Hạn",onClick:L})])])])])])):u("",!0)])}}};export{ce as default};
