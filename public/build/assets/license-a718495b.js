import{g as j,r as d,s as D,i as S,a as T,c as u,b as e,d as a,k as b,l as m,F as E,x as F,t as c,f,o as i,n as w}from"./app-47f6bd4e.js";import{_ as k}from"./ButtonColor-7d9772e6.js";import{_ as r,a as V}from"./ButtonPrimary-259d44f9.js";import{_ as C}from"./SelectEnumField-504ebe4a.js";const I={class:"container p-5"},N={key:0,id:"authentication-modal",tabindex:"-1","aria-hidden":"true",class:"fixed z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex justify-center items-center"},G={class:"relative w-full max-w-md max-h-full"},K={class:"relative bg-white rounded-lg shadow"},X=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Z=e("span",{class:"sr-only"},"Close modal",-1),H=[X,Z],J={class:"px-6 py-6 lg:px-8"},O=e("h3",{class:"mb-4 text-xl font-medium text-gray-900"},"Thêm License",-1),P={class:"space-y-6"},Q={class:"relative overflow-x-auto"},R={class:"w-full text-sm text-left text-gray-500"},W=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," # "),e("th",{scope:"col",class:"px-6 py-3"}," User Id "),e("th",{scope:"col",class:"px-6 py-3"}," Key "),e("th",{scope:"col",class:"px-6 py-3"}," Type "),e("th",{scope:"col",class:"px-6 py-3"}," Expiry "),e("th",{scope:"col",class:"px-6 py-3"}," Function ")])],-1),Y={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},ee={class:"px-6 py-4"},te={class:"px-6 py-4"},le={class:"px-6 py-4"},se={class:"px-6 py-4"},oe={class:"px-6 py-4"},ae={key:1,class:"fixed z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex justify-center items-center"},ne={class:"relative w-full max-w-md max-h-full"},ie={class:"relative bg-white rounded-lg shadow"},re=e("span",{class:"sr-only"},"Close modal",-1),de={class:"px-6 py-6 lg:px-8"},ue=e("h3",{class:"mb-4 text-xl font-medium text-gray-900"},"Sửa License",-1),ce={class:"space-y-6"},pe={class:"relative w-full max-w-md max-h-full"},me={class:"relative bg-white rounded-lg shadow"},ye=e("button",{type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"popup-modal"},[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})]),e("span",{class:"sr-only"},"Close modal")],-1),xe={class:"p-6 text-center"},ve=e("svg",{class:"mx-auto mb-4 text-gray-400 w-12 h-12","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),he={class:"mb-5 text-lg font-normal text-gray-500 capitalize"},ke={__name:"license",setup(fe){const y=j(),_=d(null),s=d({user_id:0,license_key:"",license_type:""}),g=d(null),x=d(!1),p=d(!1),v=d(!1),n=D({type:0,day:0});function $(){v.value=!0}function M(o){s.value=o,x.value=!0}function U(o){s.value=o,p.value=!0}async function A(){const o={license:s.value,dayAdd:n};(await f.post("/api/admin/license/add",{license:o},{headers:{Authorization:`Bearer ${y.state.token}`}})).status===200&&(v.value=!1),await h()}async function B(){const o=s.value;(await f.post("/api/admin/license/del",{license:o},{headers:{Authorization:`Bearer ${y.state.token}`}})).status===200&&(p.value=!1),await h()}async function q(){const o={license:s.value,dayAdd:n};(await f.post("/api/admin/license/change",{licenseData:o},{headers:{Authorization:`Bearer ${y.state.token}`}})).status===200&&(x.value=!1),await h()}async function h(){const o=await f.get("/api/admin/license",{headers:{Authorization:`Bearer ${y.state.token}`}});o.status===200&&(_.value=o.data.licenses,g.value=o.data.enumExpir)}return S(h),(o,l)=>{const z=T("font-awesome-icon");return i(),u("div",I,[e("button",{type:"button",onClick:$,class:"text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"Thêm License"),v.value?(i(),u("div",N,[e("div",G,[e("div",K,[e("button",{type:"button",onClick:l[0]||(l[0]=t=>v.value=!1),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center","data-modal-hide":"authentication-modal"},H),e("div",J,[O,e("div",P,[e("div",null,[a(r,{modelValue:s.value.user_id,"onUpdate:modelValue":l[1]||(l[1]=t=>s.value.user_id=t),label:"User Id",type:"number",name:"user_id",required:""},null,8,["modelValue"]),a(r,{modelValue:s.value.license_key,"onUpdate:modelValue":l[2]||(l[2]=t=>s.value.license_key=t),label:"license key",type:"text",name:"license_key",required:""},null,8,["modelValue"]),a(r,{modelValue:s.value.license_type,"onUpdate:modelValue":l[3]||(l[3]=t=>s.value.license_type=t),label:"license type",type:"text",name:"license_type",required:""},null,8,["modelValue"]),a(C,{modelValue:n.type,"onUpdate:modelValue":l[4]||(l[4]=t=>n.type=t),label:"Loại Time",name:"select_option",options:g.value,required:""},null,8,["modelValue","options"]),s.value.expiry_date!==null?(i(),b(r,{key:0,modelValue:o.licenseDateAdd,"onUpdate:modelValue":l[5]||(l[5]=t=>o.licenseDateAdd=t),label:"expiry date",type:"number",name:"expiry_date",required:""},null,8,["modelValue"])):m("",!0)]),a(V,{label:"Gửi",onClick:A})])])])])])):m("",!0),e("div",Q,[e("table",R,[W,e("tbody",null,[(i(!0),u(E,null,F(_.value,t=>(i(),u("tr",{key:t.id,class:"bg-white border-b"},[e("th",Y,c(t.id),1),e("td",ee,c(t.user_id),1),e("td",te,c(t.license_key),1),e("td",le,c(t.license_type),1),e("td",se,c(t.expiry_date===null?"Vĩnh Viễn":t.expiry_date),1),e("td",oe,[a(k,{class:w("bg-green-400 hover:bg-green-600 focus:ring-4 focus:ring-green-300"),onClick:L=>M(t),label:"Sửa"},null,8,["onClick"]),a(k,{class:w("bg-red-400 hover:bg-red-600 focus:ring-4 focus:ring-red-300"),onClick:L=>U(t),label:"Xoá"},null,8,["onClick"])])]))),128))])])]),x.value?(i(),u("div",ae,[e("div",ne,[e("div",ie,[e("button",{type:"button",onClick:l[6]||(l[6]=t=>x.value=!1),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center"},[a(z,{icon:["fas","xmark"]}),re]),e("div",de,[ue,e("div",ce,[e("div",null,[a(r,{modelValue:s.value.user_id,"onUpdate:modelValue":l[7]||(l[7]=t=>s.value.user_id=t),label:"User Id",type:"number",name:"user_id",required:""},null,8,["modelValue"]),a(r,{modelValue:s.value.license_key,"onUpdate:modelValue":l[8]||(l[8]=t=>s.value.license_key=t),label:"license key",type:"text",name:"license_key",required:""},null,8,["modelValue"]),a(r,{modelValue:s.value.license_type,"onUpdate:modelValue":l[9]||(l[9]=t=>s.value.license_type=t),label:"license type",type:"text",name:"license_type",required:""},null,8,["modelValue"]),a(C,{modelValue:n.type,"onUpdate:modelValue":l[10]||(l[10]=t=>n.type=t),label:"Loại Time",name:"select_option",options:g.value,required:""},null,8,["modelValue","options"]),s.value.expiry_date!==null?(i(),b(r,{key:0,modelValue:n.day,"onUpdate:modelValue":l[11]||(l[11]=t=>n.day=t),label:"expiry date",type:"number",name:"expiry_date",required:""},null,8,["modelValue"])):m("",!0)]),a(V,{label:"Sửa",onClick:q})])])])])])):m("",!0),p.value?(i(),u("div",{key:2,onClick:l[13]||(l[13]=t=>p.value=!1),class:"fixed top-0 left-0 right-0 z-50 p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full justify-center items-center flex"},[e("div",pe,[e("div",me,[ye,e("div",xe,[ve,e("h3",he,"chắc là xoá '"+c(s.value===null?"":s.value.id)+"' chưa ",1),e("button",{onClick:B,type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2"}," Chắc "),e("button",{onClick:l[12]||(l[12]=t=>p.value=!1),type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"},"Đéo")])])])])):m("",!0)])}}};export{ke as default};
