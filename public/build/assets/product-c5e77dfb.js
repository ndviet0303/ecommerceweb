import{o as u,c,b as e,t as r,r as m,s as M,g as X,i as J,d as a,l as f,F as O,x as I,f as b,n as C,z as Y,k as H}from"./app-47f6bd4e.js";import{_ as i,a as $}from"./ButtonPrimary-259d44f9.js";import{_ as B}from"./SelectEnumField-504ebe4a.js";import{_ as j}from"./SelectField-e32b8d3c.js";import{_ as q}from"./ButtonColor-7d9772e6.js";const Z=["for"],K=["name","value","required"],z={__name:"TextAreaField",props:["label","name","modelValue","required"],setup(h,{emit:d}){function x(p){d("update:modelValue",p.target.value)}return(p,s)=>(u(),c("div",null,[e("label",{for:h.name,class:"block mb-2 text-sm font-medium text-gray-900"},r(h.label),9,Z),e("textarea",{name:h.name,value:h.modelValue,onInput:x,required:h.required,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",rows:"4"},null,40,K)]))}},Q={class:"container p-5"},R={key:0,id:"authentication-modal",tabindex:"-1","aria-hidden":"true",class:"fixed z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex justify-center items-center"},W={class:"relative w-full max-w-md max-h-full"},ee={class:"relative bg-white rounded-lg shadow"},te=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),oe=e("span",{class:"sr-only"},"Close modal",-1),le=[te,oe],ae={class:"px-6 py-6 lg:px-8"},ne=e("h3",{class:"mb-4 text-xl font-medium text-gray-900"},"Thêm Tool",-1),se={class:"space-y-6"},re={key:2,class:"fixed z-50 w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full flex justify-center items-center"},ie={class:"relative w-full max-w-md max-h-full"},de={class:"relative bg-white rounded-lg shadow"},ue=e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),ce=e("span",{class:"sr-only"},"Close modal",-1),pe=[ue,ce],me={class:"px-6 py-6 lg:px-8"},he=e("h3",{class:"mb-4 text-xl font-medium text-gray-900"},"Sửa Tool",-1),ge={class:"space-y-6"},ye={class:"relative w-full max-w-md max-h-full"},xe={class:"relative bg-white rounded-lg shadow"},_e=e("button",{type:"button",class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white","data-modal-hide":"popup-modal"},[e("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})]),e("span",{class:"sr-only"},"Close modal")],-1),ve={class:"p-6 text-center"},fe=e("svg",{class:"mx-auto mb-4 text-gray-400 w-12 h-12","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"},[e("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 11V6m0 8h.01M19 10a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),be={class:"mb-5 text-lg font-normal text-gray-500 capitalize"},we={class:"relative overflow-x-auto"},Ve={class:"w-full text-sm text-left text-gray-500"},ke=e("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3"}," # "),e("th",{scope:"col",class:"px-6 py-3"}," Tên "),e("th",{scope:"col",class:"px-6 py-3"}," Giá "),e("th",{scope:"col",class:"px-6 py-3"}," Hạn Dùng "),e("th",{scope:"col",class:"px-6 py-3"}," TT Chung "),e("th",{scope:"col",class:"px-6 py-3"}," License Type "),e("th",{scope:"col",class:"px-6 py-3"}," Ảnh "),e("th",{scope:"col",class:"px-6 py-3"}," Video "),e("th",{scope:"col",class:"px-6 py-3"}," TT Tool "),e("th",{scope:"col",class:"px-6 py-3"}," Lượt Xem "),e("th",{scope:"col",class:"px-6 py-3"}," Lượt Mua "),e("th",{scope:"col",class:"px-6 py-3"}," Loại "),e("th",{scope:"col",class:"px-6 py-3"}," Duyệt "),e("th",{scope:"col",class:"px-6 py-3"}," Url "),e("th",{scope:"col",class:"px-6 py-3"}," Function ")])],-1),Ce={scope:"row",class:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap"},Te={class:"px-6 py-4"},qe={class:"px-6 py-4"},Ue={class:"px-6 py-4"},Se={class:"px-6 py-4"},Me={class:"px-6 py-4"},$e={class:"px-6 py-4"},Be={class:"px-6 py-4"},je={class:"px-6 py-4"},ze={class:"px-6 py-4"},De={class:"px-6 py-4"},Ae={class:"px-6 py-4"},Le={class:"px-6 py-4"},Pe={class:"px-6 py-4"},Ne={class:"px-6 py-4"},Oe={__name:"product",setup(h){const d=m(!1),x=m(!1),p=m(!1),s=m(null),w=m(null),U=M({}),_=m({}),V=m({}),n=M({name:"",price:0,type:0,license_type:"",url:"",infor:"",img:"",vid:"",description:"",typeclassify:0}),g=X(),D=g.getters.getUserData;function A(l){w.value=l,x.value=!0}function y(l){try{const o=JSON.parse(l);if(Array.isArray(o)&&o.length>0)return o.join(",")}catch(o){console.error("Error parsing JSON:",o)}return""}const L=(l,o)=>l.length>o?l.slice(0,o)+"...":l;async function P(){const l=w.value;await b.post("/api/admin/product/remove",{data:l},{headers:{Authorization:`Bearer ${g.state.token}`}}).then(o=>{}).catch(o=>{window.location.reload()}),await v()}function S(){x.value=!1}function T(){d.value=!d.value}function N(l){s.value={...l,product_img:y(l.product_img),product_info:y(l.product_info),product_vid:y(l.product_vid)},p.value=!0}async function E(){const l=s.value;await b.post("/api/admin/product/change",{product:l},{headers:{Authorization:`Bearer ${g.state.token}`}}).then(o=>{p.value=!1}).catch(o=>{}),await v()}async function F(l){await b.post("/api/admin/product/show",{product:l},{headers:{Authorization:`Bearer ${g.state.token}`}}).then(o=>{}).catch(o=>{d.value=!1}),await v()}async function v(){await b.get("/api/admin/products",{headers:{Authorization:`Bearer ${g.state.token}`}}).then(l=>{U.value=l.data.products,_.value=l.data.enumExpir,V.value=l.data.product_type}).catch(l=>{console.log(l)})}async function G(){await b.post("/api/admin/product/add",{formData:n},{headers:{Authorization:`Bearer ${g.state.token}`}}).then(l=>{d.value=!1}).catch(l=>{d.value=!1}),await v()}return J(v),(l,o)=>(u(),c("div",Q,[e("button",{type:"button",onClick:T,class:"text-white bg-gradient-to-br from-purple-600 to-blue-500 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center mr-2 mb-2"},"Thêm SP"),d.value?(u(),c("div",R,[e("div",W,[e("div",ee,[e("button",{type:"button",onClick:T,class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center","data-modal-hide":"authentication-modal"},le),e("div",ae,[ne,e("div",se,[e("div",null,[a(i,{modelValue:n.name,"onUpdate:modelValue":o[0]||(o[0]=t=>n.name=t),label:"Tên Sản Phẩm",type:"text",name:"product_name",placeholder:"Tool X",required:""},null,8,["modelValue"]),a(i,{modelValue:n.price,"onUpdate:modelValue":o[1]||(o[1]=t=>n.price=t),label:"Giá Sản Phẩm",name:"product_name",type:"number",required:""},null,8,["modelValue"]),a(i,{modelValue:n.license_type,"onUpdate:modelValue":o[2]||(o[2]=t=>n.license_type=t),label:"Type",name:"product_license",type:"text",required:""},null,8,["modelValue"]),a(i,{modelValue:n.url,"onUpdate:modelValue":o[3]||(o[3]=t=>n.url=t),label:"Url",name:"product_url",type:"text",required:""},null,8,["modelValue"]),a(B,{modelValue:n.type,"onUpdate:modelValue":o[4]||(o[4]=t=>n.type=t),label:"Loại Time",name:"select_option",options:_.value,required:""},null,8,["modelValue","options"]),a(i,{modelValue:n.infor,"onUpdate:modelValue":o[5]||(o[5]=t=>n.infor=t),label:`Thông Tin
                                    cơ Bản`,name:"product_price",type:"text",placeholder:"tool ghẻ , tool sida",required:""},null,8,["modelValue"]),a(i,{modelValue:n.img,"onUpdate:modelValue":o[6]||(o[6]=t=>n.img=t),label:`hình
                                    ảnh`,name:"product_img",type:"text",placeholder:"link , link",required:""},null,8,["modelValue"]),a(i,{modelValue:n.vid,"onUpdate:modelValue":o[7]||(o[7]=t=>n.vid=t),label:"video",name:"product_vid",type:"text",placeholder:"link , link",required:""},null,8,["modelValue"]),a(z,{modelValue:n.description,"onUpdate:modelValue":o[8]||(o[8]=t=>n.description=t),label:"Mô tả",name:"description",required:""},null,8,["modelValue"]),a(j,{modelValue:n.typeclassify,"onUpdate:modelValue":o[9]||(o[9]=t=>n.typeclassify=t),label:`Loại
                                Tool`,name:"product_type_app",options:V.value,required:""},null,8,["modelValue","options"])]),a($,{label:"Gửi",onClick:G})])])])])])):f("",!0),d.value?(u(),c("div",{key:1,class:"fixed top-0 left-0 right-0 bottom-0 bg-black opacity-50 z-40",onClick:T})):f("",!0),p.value?(u(),c("div",re,[e("div",ie,[e("div",de,[e("button",{type:"button",onClick:o[10]||(o[10]=t=>p.value=!1),class:"absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center","data-modal-hide":"authentication-modal"},pe),e("div",me,[he,e("div",ge,[e("div",null,[a(i,{modelValue:s.value.product_name,"onUpdate:modelValue":o[11]||(o[11]=t=>s.value.product_name=t),label:"Tên Sản Phẩm",type:"text",name:"product_name",placeholder:"Tool X",required:""},null,8,["modelValue"]),a(i,{modelValue:s.value.product_price,"onUpdate:modelValue":o[12]||(o[12]=t=>s.value.product_price=t),label:"Giá Sản Phẩm",name:"product_name",type:"number",required:""},null,8,["modelValue"]),a(B,{modelValue:s.value.product_type,"onUpdate:modelValue":o[13]||(o[13]=t=>s.value.product_type=t),label:"Loại Time",name:"select_option",options:_.value,required:""},null,8,["modelValue","options"]),a(i,{modelValue:s.value.product_info,"onUpdate:modelValue":o[14]||(o[14]=t=>s.value.product_info=t),label:`Thông Tin
                                    cơ Bản`,name:"product_price",type:"text",placeholder:"tool ghẻ , tool sida",required:""},null,8,["modelValue"]),a(i,{modelValue:s.value.product_img,"onUpdate:modelValue":o[15]||(o[15]=t=>s.value.product_img=t),label:`hình
                                    ảnh`,name:"product_img",type:"text",placeholder:"link , link",required:""},null,8,["modelValue"]),a(i,{modelValue:s.value.product_vid,"onUpdate:modelValue":o[16]||(o[16]=t=>s.value.product_vid=t),label:"video",name:"product_vid",type:"text",placeholder:"link , link",required:""},null,8,["modelValue"]),a(z,{modelValue:s.value.product_description,"onUpdate:modelValue":o[17]||(o[17]=t=>s.value.product_description=t),label:"Mô tả",name:"description",required:""},null,8,["modelValue"]),a(j,{modelValue:s.value.type_id,"onUpdate:modelValue":o[18]||(o[18]=t=>s.value.type_id=t),label:`Loại
                                Tool`,name:"product_type_app",options:V.value,required:""},null,8,["modelValue","options"])]),a($,{label:"Sửa",onClick:E})])])])])])):f("",!0),x.value?(u(),c("div",{key:3,onClick:S,class:"fixed top-0 left-0 right-0 z-50 p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full justify-center items-center flex"},[e("div",ye,[e("div",xe,[_e,e("div",ve,[fe,e("h3",be,"chắc là xoá '"+r(w.value===null?"":w.value.product_name)+"' chưa ",1),e("button",{onClick:P,type:"button",class:"text-white bg-red-600 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm inline-flex items-center px-5 py-2.5 text-center mr-2"}," Chắc "),e("button",{onClick:S,type:"button",class:"text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:outline-none focus:ring-gray-200 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10"},"Đéo")])])])])):f("",!0),e("div",we,[e("table",Ve,[ke,e("tbody",null,[(u(!0),c(O,null,I(U.value,t=>(u(),c("tr",{key:t.id,class:"bg-white border-b"},[e("th",Ce,r(t.id),1),e("td",Te,r(t.product_name),1),e("td",qe,r(t.product_price.toLocaleString())+"đ ",1),e("td",Ue,r(Object.keys(_.value).find(k=>_.value[k]===t.product_type)),1),e("td",Se,r(y(t.product_info)),1),e("td",Me,r(t.license_type),1),e("td",$e,r(y(t.product_img)),1),e("td",Be,r(y(t.product_vid)),1),e("td",je,r(L(t.product_description,10)),1),e("td",ze,r(t.product_view),1),e("td",De,r(t.product_bought),1),e("td",Ae,r(V.value[t.type_id-1].name),1),e("td",Le,[e("p",{class:C(t.is_show?"text-green-500 bg-green-300 rounded-xl p-2":"text-red-500 bg-red-300 rounded-xl p-2")},r(t.is_show?"Đã Duyệt":"Chưa Duyệt"),3)]),e("td",Pe,r(t.download_url),1),e("td",Ne,[a(q,{class:C("bg-green-400 hover:bg-green-600 focus:ring-4 focus:ring-green-300"),onClick:k=>N(t),label:"Sửa"},null,8,["onClick"]),a(q,{class:C("bg-red-400 hover:bg-red-600 focus:ring-4 focus:ring-red-300"),onClick:k=>A(t),label:"Xoá"},null,8,["onClick"]),Y(D).user_role==3?(u(),H(q,{key:0,class:C("bg-orange-400 hover:bg-orange-600 focus:ring-4 focus:ring-orange-300"),onClick:k=>F(t),label:"Duyệt"},null,8,["onClick"])):f("",!0)])]))),128))])])])]))}};export{Oe as default};
